# Bob's Brain - Environment Configuration Template
# Copy this file to .env and fill in your values
# Last Updated: 2025-11-11

# ============================================================================
# Required Configuration (R1-R8)
# ============================================================================

# Google Cloud Project Configuration (R2: Agent Engine)
PROJECT_ID=your-gcp-project-id
LOCATION=us-central1
AGENT_ENGINE_ID=your-agent-engine-id

# Agent Identity (R7: SPIFFE ID)
# Format: spiffe://intent.solutions/agent/bobs-brain/<env>/<region>/<version>
AGENT_SPIFFE_ID=spiffe://intent.solutions/agent/bobs-brain/dev/us-central1/0.6.0

# Application Configuration
APP_NAME=bobs-brain
APP_VERSION=0.6.0

# ============================================================================
# RAG Configuration (Phase RC1: Centralized RAG Config)
# ============================================================================

# Environment Selection (auto-detected if not set)
# DEPLOYMENT_ENV=dev  # Options: dev, staging, prod

# Vertex AI Search - Common Configuration
VERTEX_SEARCH_PROJECT_ID=your-gcp-project-id
VERTEX_SEARCH_LOCATION=global  # or us-central1, etc.

# Vertex AI Search - Environment-Specific Datastore IDs
# Dev: Development/testing datastore
VERTEX_SEARCH_DATASTORE_ID_DEV=adk-documentation-dev

# Staging: Pre-production datastore
VERTEX_SEARCH_DATASTORE_ID_STAGING=adk-documentation-staging

# Production: Live datastore (careful!)
VERTEX_SEARCH_DATASTORE_ID_PROD=adk-documentation-prod

# Note: Datastores created by scripts/setup_vertex_search.sh

# ============================================================================
# Service Configuration (R3: Gateway URLs)
# ============================================================================

# A2A Gateway Public URL (for AgentCard)
PUBLIC_URL=https://your-a2a-gateway.run.app

# Slack Webhook URL (optional - for Slack integration)
SLACK_WEBHOOK_URL=https://your-slack-webhook.run.app

# ============================================================================
# Google Cloud Authentication (R4: CI-Only Deployments)
# ============================================================================

# NOTE: Never set GOOGLE_APPLICATION_CREDENTIALS for production deployments!
# Production uses Workload Identity Federation (WIF) in GitHub Actions.
# Only set this for local development/testing.
#
# GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account-key.json

# ============================================================================
# Slack Integration (Optional)
# ============================================================================

# Slack Bot Token (starts with xoxb-)
SLACK_BOT_TOKEN=xoxb-your-bot-token-here

# Slack Signing Secret (for webhook verification)
SLACK_SIGNING_SECRET=your-signing-secret-here

# Slack App ID
SLACK_APP_ID=A099YKLCM1N

# ============================================================================
# LIVE3A: Slack Notifications (Portfolio SWE Audits)
# ============================================================================

# Enable Slack notifications for portfolio/SWE completion (LIVE3A)
# SAFETY: Notifications are DISABLED by default
# Set to "true" only when you want to receive Slack notifications
SLACK_NOTIFICATIONS_ENABLED=false

# Slack Webhook URL for SWE/Portfolio notifications (LIVE3A)
# Preferred method: incoming webhook (no bot token required)
# Get from: https://api.slack.com/messaging/webhooks
# SLACK_SWE_CHANNEL_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# Alternative: Slack Channel ID (requires SLACK_BOT_TOKEN above)
# Format: C01234567 (found in Slack channel details)
# SLACK_SWE_CHANNEL_ID=C01234567

# Note: Use webhook URL (preferred) OR channel ID, not both

# ============================================================================
# GitHub Integration (Phase GH)
# ============================================================================

# GitHub Personal Access Token (for read and write operations)
# Required for fetching repo contents and creating issues
# Scopes needed: repo (or public_repo for public repos only)
# GITHUB_TOKEN=ghp_your_token_here

# GitHub Issue Creation Feature Flag (Phase GHC)
# SAFETY: Issue creation is DISABLED by default
# Set to "true" only when you want to allow actual issue creation
GITHUB_ISSUE_CREATION_ENABLED=false

# GitHub Issue Creation Allowlist (Phase GHC)
# Comma-separated list of repo IDs (from config/repos.yaml)
# Examples:
#   - Specific repos: bobs-brain,test-repo
#   - All repos (use with caution!): *
#   - No repos (default): (empty)
GITHUB_ISSUE_CREATION_ALLOWED_REPOS=

# ============================================================================
# Development/Testing Configuration
# ============================================================================

# CI Environment (auto-set by GitHub Actions)
# GITHUB_ACTIONS=true

# Log Level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# ============================================================================
# Hard Mode Rules Enforcement
# ============================================================================

# R1: Agent Implementation - google-adk only (enforced in code)
# R2: Runtime - Vertex AI Agent Engine (PROJECT_ID + AGENT_ENGINE_ID required)
# R3: Cloud Run Role - Gateways only (service/ must NOT import Runner)
# R4: CI-Only Deploys - No manual gcloud (enforced in CI)
# R5: Dual Memory - Session + Memory Bank (enforced in my_agent/agent.py)
# R6: Single 000-docs/ - All docs in one place (enforced in structure)
# R7: SPIFFE ID - Immutable agent tag (AGENT_SPIFFE_ID required)
# R8: Drift Detection - CI scans for violations (enforced in CI)

# ============================================================================
# Environment-Specific Examples
# ============================================================================

# Development Environment
# AGENT_SPIFFE_ID=spiffe://intent.solutions/agent/bobs-brain/dev/us-central1/0.6.0
# PUBLIC_URL=http://localhost:8080

# Staging Environment
# AGENT_SPIFFE_ID=spiffe://intent.solutions/agent/bobs-brain/staging/us-central1/0.6.0
# PUBLIC_URL=https://bobs-brain-staging-a2a.run.app

# Production Environment
# AGENT_SPIFFE_ID=spiffe://intent.solutions/agent/bobs-brain/prod/us-central1/0.6.0
# PUBLIC_URL=https://bobs-brain-a2a.run.app

# ============================================================================
# Notes
# ============================================================================

# 1. Never commit .env to git (it's in .gitignore)
# 2. Production values are managed by Terraform (infra/)
# 3. GitHub Actions uses WIF + secrets (no service account keys)
# 4. SPIFFE ID format must follow: spiffe://<trust-domain>/agent/<name>/<env>/<region>/<version>
# 5. All environment variables are validated at runtime in my_agent/agent.py
